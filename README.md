# Анненков Никита Игоревич, БПИ226
Анненков Никита Игоревич

Вариант: 3

Задача о Винни-Пухе и неправильных пчелах. N > 3 пчел
живет в улье, каждая пчела может собирать мед и сторожить улей.
Пчела не покинет улей, если кроме нее в нем нет других пчел.
Каждая пчела приносит за раз одну порцию меда. Всего в улей
может войти тридцать порций меда. Вини-Пух спит пока меда в
улье меньше половины, но как только его становится достаточно,
он просыпается и пытается достать весь мед из улья. Если в улье
находится менее чем три пчелы, Вини-Пух забирает мед, убегает,
съедает мед и снова засыпает. Если в улье пчел больше, они кусают
Вини-Пуха, он убегает, лечит укус, и снова бежит за медом. Создать многопоточное приложение, моделирующее поведение пчел
и медведя. Осуществить балансировку, обеспечивающую циклическое освобождение улья от меда. Медведь и каждая из пчел
моделируются отдельными потоками.


Претендую на 7 баллов.


*Модель построения многопоточного приложения:* Производители и потребители, Управляющий и рабочие.
Так как задача была достаточно непростая я использовал две моедли под разную часть функционала:
1. Контроль пчел и количества меда (Управляющий и рабочий). Описание: Поток Винни-Пуха (управляющий поток) контролирует процесс сбора мёда, просыпаясь, если количество мёда в улье > 15. Он также взаимодействует с пчёлами, оценивая количество пчёл в улье и принимая решения в зависимости от этого.
2. Потребление меда и его создание (Производители и потребитили). Описание: В данном коде имеется взаимодействие между потоками пчёл (производителями) и потоком Винни-Пуха (потребителем). Пчёлы собирают мёд и складывают его в улье (общий ресурс), а Винни-Пух просыпается и "потребляет" мёд, уменьшая его количество в улье.

Теперь немного подробнее про переменную меда: Одновремменно к переменной могут иметь доступ все пчелы, но при этом если Винни пух уже ест мед, то пчелы не имеют доступа к меду.

Теперь что было сделанно:

• Описана модель параллельных вычислений, используемая при разработке многопоточной программы.

• Описаны входные данные программы, включающие вариативные диапазоны, возможные при многократных запусках.

• Реализовано консольное приложение, решающее поставленную задачу.

• Ввод данных в приложение реализован с консоли во время выполнения программы, либо через командную строку, либо рандомные значения.

• Для используемых генераторов случайных чисел описаны их диапазоны и то, как интерпретируются данные этих генераторов.

• В отчете подробно описан обобщенный алгоритм, используемый при реализации программы исходного словесного сценария. В котором показано, как на программу отображается каждый из субъектов предметной области.

• В программу добавлена генерация случайных данных в допустимых диапазонах.

• Реализован ввод исходных данных из командной строки при запуске программы вместо ввода параметров с консоли во время выполнения программы.

• Вывод программы информативен, наблюдатель на основе вывода программы понимет, что в ней происходит в каждый момент времени ее работы.

• В программе присутствуют комментарии, поясняющие выполняемые действия и описание используемых объектов и переменных.

• Результаты работы программы представлены в отчете.

*Теперь еще более подробный анализ кода*:

• Функции Потоков:

bee_thread: Симулирует поведение пчёл при сборе мёда. Пчёлы ожидают, если улей полон, и уведомляют Винни-Пуха, когда мёд собран.
winnie_thread: Симулирует пробуждение Винни-Пуха и его взятие мёда, когда в улье достаточно мёда.


• Глобальные переменные:

honey: Представляет количество мёда в улье.

num_bees_in_hive: Количество пчёл в улье в данный момент.

pooh_speed: Скорость сна Винни-Пуха.

max_pooh_capacity: Максимальная вместимость мёда, которую может потребить Винни-Пух.

pooh_heal_speed: Скорость лечения Винни-Пуха, если его ужалили пчелы.

num_bees_undef: Временная переменная для хранения количества пчёл.


• Симуляция деятельности Пчёл:

Пчёлы собирают мёд и улетают за новым на случайное время.
Если в улее одна пчела, пчёла ждет, пока вернутся другие пчёлы, прежде чем улететь за медом.
Отслеживается количество пчёл в улье, чтобы узнать ужалят ли пчелы Винни Пуха.

• Симуляция Винни-Пуха:

Пух спит и просыпается периодически.
Если в улье достаточно мёда, Пух просыпается и берёт весь мёд.
Если в улье пчел больше чем 3, Винни пуха жалит пчела и он уходит лечиться.

• Обработка ввода:

Программа позволяет пользователям вводить данные либо через аргументы командной строки, либо через консоль.
Если предоставлены аргументы командной строки, они используются; в противном случае программа запрашивает ввод пользователя.

• Выводы и их обозначения:

ouch - Винни Пуха ранили пчелы.

Bee 1 collected honey. Total honey: 1 - Пчела номер один собрала мед. Общее количество меда 1.

Bee 1 created - поток пчелы один создан.

Winnie the Pooh woke up and took all the honey! Yummy! - Винни Пух успешно съел весь мед

Winnie the Pooh woke up - Винни пух проснулся, так как количество меда достигло 15.

• Пользовательский интерфейс:

Пользователю предоставляются варианты ввода данных через командную строку, консоль или генерацию случайных данных.
Вводятся параметры, такие как количество пчёл, скорость Пуха, максимальная вместимость мёда и скорость лечения.

• Генерация случайных данных:

Функция randomator генерирует случайные значения для скорости Пуха, максимальной вместимости мёда, скорости лечения и количества пчёл.

• Создание и ожидание потоков:

Потоки для пчёл и Винни-Пуха создаются с использованием pthread_create.
Основная функция ожидает завершения всех потоков с использованием pthread_join.


Теперь скриншоты работы:

<img width="519" alt="Снимок экрана 2023-12-20 в 11 59 16" src="https://github.com/polblack7/IHW4/assets/104324054/49494d61-423e-4d83-9a13-f9cf8b20bcf6">
Продолжение вывода ->
<img width="390" alt="Снимок экрана 2023-12-20 в 12 00 21" src="https://github.com/polblack7/IHW4/assets/104324054/16dd2037-230d-47e1-9da0-9b4bd286e971">

